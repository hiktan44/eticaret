<!DOCTYPE html>
<html class="light" lang="tr">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>AI ÃœrÃ¼n StÃ¼dyosu v2.3 PRO - Gemini 3 Pro Powered</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&amp;display=swap"
    rel="stylesheet" />
  <link
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
    rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#4F46E5",
            accent: "#FF6B00",
            secondary: "#10B981",
            navy: "#0F172A",
          },
          fontFamily: { sans: ["Inter", "sans-serif"] },
          borderRadius: { '3xl': '3rem' }
        },
      },
    };
  </script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
    }

    .mesh-gradient {
      background-color: #0F172A;
      background-image: radial-gradient(at 10% 20%, hsla(158, 60%, 45%, 0.4) 0px, transparent 50%),
        radial-gradient(at 90% 10%, hsla(22, 90%, 55%, 0.3) 0px, transparent 50%),
        radial-gradient(at 50% 50%, hsla(220, 60%, 20%, 0.8) 0px, transparent 50%);
      background-attachment: fixed;
    }

    .glass-card-light {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .image-slot {
      width: 100px;
      height: 100px;
      border-radius: 1.5rem;
      border: 2px dashed #E2E8F0;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      overflow: hidden;
      position: relative;
      background: #F8FAFC;
    }

    .image-slot img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .animate-pulse-slow {
      animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
  </style>
</head>

<body class="mesh-gradient text-slate-100 antialiased overflow-x-hidden">

  <header class="fixed top-0 w-full z-50 bg-navy/60 backdrop-blur-xl border-b border-white/5">
    <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div
          class="w-10 h-10 bg-gradient-to-br from-emerald-500 to-accent rounded-xl flex items-center justify-center text-white font-black text-sm italic shadow-lg shadow-emerald-500/20">
          AI</div>
        <div>
          <h1 class="text-lg font-black tracking-tight text-white leading-none">AI ÃœrÃ¼n StÃ¼dyosu</h1>
          <p class="text-[10px] text-emerald-400 font-black uppercase tracking-widest mt-0.5">GEMÄ°NÄ° 3 PRO ACTÄ°VE</p>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <div
          class="px-4 py-1.5 bg-white/5 border border-white/10 rounded-full text-[10px] font-black tracking-widest text-emerald-400">
          v2.3 REAL-AI</div>
      </div>
    </div>
  </header>

  <main class="pt-32 pb-24 px-6 max-w-7xl mx-auto">
    <!-- UPLOAD VIEW -->
    <div id="uploadView" class="space-y-24">
      <section class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
        <div class="space-y-8 text-center lg:text-left">
          <h2 class="text-5xl lg:text-7xl font-[1000] leading-none tracking-tighter text-white">
            ÃœrÃ¼nÃ¼nÃ¼z HazÄ±r, <br />
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-white to-accent">SayfanÄ±z
              AI ile Dakikalar Ä°Ã§inde</span>
          </h2>
          <p class="text-slate-400 text-lg font-medium leading-relaxed max-w-xl mx-auto lg:mx-0">Gemini 3 Pro
            teknolojisi ile Ã¼rÃ¼n gÃ¶rsellerinizi analiz edin ve profesyonel iÃ§erikler oluÅŸturun.</p>
        </div>

        <div class="relative group">
          <div class="relative glass-card-light rounded-[3rem] p-10 lg:p-12 shadow-2xl overflow-hidden">
            <!-- Main Upload Area -->
            <div id="dropZone" onclick="document.getElementById('imgInput').click()"
              class="border-4 border-dashed border-slate-200 rounded-[2.5rem] p-12 flex flex-col items-center justify-center text-center cursor-pointer hover:border-accent transition-all duration-300 relative aspect-video overflow-hidden">
              <div id="previewContainer" class="absolute inset-0 hidden"><img id="imgPreview"
                  class="w-full h-full object-cover"></div>
              <div id="uploadPlaceholder" class="flex flex-col items-center">
                <div
                  class="w-16 h-16 bg-emerald-50 text-emerald-600 rounded-full flex items-center justify-center mb-4 shadow-sm">
                  <span class="material-symbols-outlined text-3xl">add_photo_alternate</span>
                </div>
                <span class="text-lg font-[900] uppercase tracking-wider text-navy leading-tight">GÃ¶rseli
                  YÃ¼kleyin</span>
              </div>
            </div>

            <!-- Gallery -->
            <div class="mt-6">
              <label class="text-[10px] font-black uppercase tracking-widest text-slate-400 mb-3 block pl-1">ÃœRÃœN
                GALERÄ°SÄ°</label>
              <div class="flex flex-wrap gap-3" id="galleryContainer">
                <button onclick="event.stopPropagation(); document.getElementById('imgInput').click()"
                  class="image-slot hover:border-accent group bg-slate-50"><span
                    class="material-symbols-outlined text-slate-400 group-hover:text-accent">add</span></button>
              </div>
            </div>

            <div class="mt-8 space-y-6">
              <div class="mt-8 space-y-6">
                <div class="space-y-3">
                  <div class="flex items-center justify-between px-1">
                    <label class="text-[10px] font-black uppercase text-slate-500 tracking-widest">EK BÄ°LGÄ°LER /
                      NOTLAR</label>
                    <button onclick="document.getElementById('docInput').click()"
                      class="text-[10px] font-black text-emerald-500 uppercase hover:text-emerald-400 flex items-center gap-1">
                      <span class="material-symbols-outlined text-[14px]">description</span>
                      <span id="docStatus">Teknik Belge Ekle</span>
                    </button>
                  </div>
                  <textarea id="pDesc" rows="3" placeholder="Barkod, marka veya Ã¼rÃ¼n hikayesi hakkÄ±nda notlar..."
                    class="w-full bg-slate-50 border-slate-200 rounded-2xl text-sm font-bold p-4 text-navy focus:ring-accent focus:border-accent resize-none"></textarea>
                </div>
                <button onclick="startAnalysis()" id="analysisBtn"
                  class="w-full bg-navy text-white font-black py-5 rounded-[1.5rem] shadow-xl hover:bg-slate-800 transition-all flex items-center justify-center gap-3">
                  <span>Analizi BaÅŸlat (Gemini 3)</span>
                  <span class="material-symbols-outlined text-emerald-400">auto_fix_high</span>
                </button>
              </div>
            </div>
          </div>
      </section>

      <!-- NasÄ±l Ã‡alÄ±ÅŸÄ±r? -->
      <section class="py-24 space-y-16">
        <div class="text-center space-y-4">
          <h3 class="text-4xl lg:text-5xl font-[1000] tracking-tighter">NasÄ±l Ã‡alÄ±ÅŸÄ±r?</h3>
          <p class="text-slate-400 font-medium">Yapay zeka teknolojimiz ile Ã¼rÃ¼nÃ¼nÃ¼zÃ¼ saniyeler iÃ§inde analiz edip
            satÄ±ÅŸa hazÄ±r hale getiriyoruz.</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div class="glass-card-light !bg-white/5 border-white/5 p-10 rounded-[3rem] relative overflow-hidden group">
            <div class="text-8xl font-[1000] text-white/5 absolute -right-4 -top-4 italic">1</div>
            <div class="space-y-4 relative">
              <div class="w-12 h-12 bg-emerald-500/20 text-emerald-400 rounded-2xl flex items-center justify-center">
                <span class="material-symbols-outlined">upload_file</span>
              </div>
              <h4 class="text-xl font-black italic">FotoÄŸraflarÄ± YÃ¼kleyin</h4>
              <p class="text-sm text-slate-400 font-medium leading-relaxed">ÃœrÃ¼nÃ¼nÃ¼zÃ¼n herhangi bir ortamda, telefonla
                bile Ã§ekilmiÅŸ fotoÄŸrafÄ±nÄ± sisteme yÃ¼kleyin. Arka plan Ã¶nemli deÄŸil.</p>
            </div>
          </div>
          <div class="glass-card-light !bg-white/5 border-white/5 p-10 rounded-[3rem] relative overflow-hidden group">
            <div class="text-8xl font-[1000] text-white/5 absolute -right-4 -top-4 italic">2</div>
            <div class="space-y-4 relative">
              <div class="w-12 h-12 bg-accent/20 text-accent rounded-2xl flex items-center justify-center">
                <span class="material-symbols-outlined">psychology</span>
              </div>
              <h4 class="text-xl font-black italic">Yapay Zeka Analizi</h4>
              <p class="text-sm text-slate-400 font-medium leading-relaxed">GeliÅŸmiÅŸ AI motorumuz Ã¼rÃ¼nÃ¼nÃ¼zÃ¼ tanÄ±r,
                detaylarÄ±nÄ± analiz eder, gÃ¶rsel hatalarÄ± giderir ve Ã§Ã¶zÃ¼nÃ¼rlÃ¼ÄŸÃ¼ 4K'ya yÃ¼kseltir.</p>
            </div>
          </div>
          <div class="glass-card-light !bg-white/5 border-white/5 p-10 rounded-[3rem] relative overflow-hidden group">
            <div class="text-8xl font-[1000] text-white/5 absolute -right-4 -top-4 italic">3</div>
            <div class="space-y-4 relative">
              <div class="w-12 h-12 bg-primary/20 text-primary rounded-2xl flex items-center justify-center">
                <span class="material-symbols-outlined">auto_awesome</span>
              </div>
              <h4 class="text-xl font-black italic">SayfanÄ±z HazÄ±r</h4>
              <p class="text-sm text-slate-400 font-medium leading-relaxed">SatÄ±ÅŸa hazÄ±r baÅŸlÄ±klar, ikna edici
                aÃ§Ä±klamalar, teknik Ã¶zellikler ve optimize edilmiÅŸ gÃ¶rsellerle sayfanÄ±z anÄ±nda yayÄ±nda.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Neler HazÄ±rlÄ±yoruz? -->
      <section class="py-24 grid grid-cols-1 lg:grid-cols-2 gap-16 items-center border-t border-white/5">
        <div class="space-y-8">
          <h3 class="text-4xl lg:text-6xl font-[1000] tracking-tighter leading-none">Neler <br /> <span
              class="text-emerald-400 italic">HazÄ±rlÄ±yoruz?</span></h3>
          <div class="grid grid-cols-2 gap-4 text-left">
            <div class="p-6 bg-white/5 border border-white/5 rounded-3xl space-y-3">
              <span class="material-symbols-outlined text-primary">title</span>
              <div class="font-black text-xs uppercase tracking-widest">SEO BaÅŸlÄ±klar</div>
              <p class="text-[10px] text-slate-500 font-bold uppercase">Arama motorlarÄ± iÃ§in optimize edilmiÅŸ.</p>
            </div>
            <div class="p-6 bg-white/5 border border-white/5 rounded-3xl space-y-3">
              <span class="material-symbols-outlined text-emerald-400">description</span>
              <div class="font-black text-xs uppercase tracking-widest">ÃœrÃ¼n Hikayesi</div>
              <p class="text-[10px] text-slate-500 font-bold uppercase">MÃ¼ÅŸteriyi ikna eden anlatÄ±m.</p>
            </div>
            <div class="p-6 bg-white/5 border border-white/5 rounded-3xl space-y-3">
              <span class="material-symbols-outlined text-accent">settings</span>
              <div class="font-black text-xs uppercase tracking-widest">Teknik Detaylar</div>
              <p class="text-[10px] text-slate-500 font-bold uppercase">Eksiksiz Ã¶zellik listesi.</p>
            </div>
            <div class="p-6 bg-white/5 border border-white/5 rounded-3xl space-y-3">
              <span class="material-symbols-outlined text-white">photo_library</span>
              <div class="font-black text-xs uppercase tracking-widest">4K GÃ¶rseller</div>
              <p class="text-[10px] text-slate-500 font-bold uppercase">Kusursuz e-ticaret fotoÄŸraflarÄ±.</p>
            </div>
          </div>
        </div>
        <div class="glass-card-light !bg-white/5 border-white/5 p-12 rounded-[4rem] space-y-10">
          <h4 class="text-3xl font-[1000] italic">Kimler Ä°Ã§in MÃ¼kemmel?</h4>
          <ul class="space-y-6">
            <li class="flex items-center gap-4 group">
              <div class="w-10 h-10 bg-emerald-500/10 rounded-xl flex items-center justify-center text-emerald-400">
                <span class="material-symbols-outlined">storefront</span>
              </div>
              <span class="font-bold text-slate-300">Pazaryeri SatÄ±cÄ±larÄ± (Amazon, Trendyol)</span>
            </li>
            <li class="flex items-center gap-4 group">
              <div class="w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center text-primary">
                <span class="material-symbols-outlined">shopping_cart</span>
              </div>
              <span class="font-bold text-slate-300">Kendi E-Ticaret Sitesi Olanlar</span>
            </li>
            <li class="flex items-center gap-4 group">
              <div class="w-10 h-10 bg-accent/10 rounded-xl flex items-center justify-center text-accent">
                <span class="material-symbols-outlined">share</span>
              </div>
              <span class="font-bold text-slate-300">Sosyal Medya SatÄ±cÄ±larÄ± (Instagram, TikTok)</span>
            </li>
            <li class="flex items-center gap-4 group">
              <div class="w-10 h-10 bg-white/10 rounded-xl flex items-center justify-center text-white">
                <span class="material-symbols-outlined">local_shipping</span>
              </div>
              <span class="font-bold text-slate-300">Dropshipping GiriÅŸimcileri</span>
            </li>
          </ul>
          <blockquote class="pt-8 border-t border-white/5 italic text-slate-400 text-sm">
            "Bu araÃ§ sayesinde Ã¼rÃ¼n yÃ¼kleme hÄ±zÄ±m 10 kat arttÄ±." - <span class="text-white font-bold">Ahmet Y.,
              E-Ticaret
              GiriÅŸimcisi</span>
          </blockquote>
        </div>
      </section>

      <!-- Footer -->
      <footer class="py-12 border-t border-white/5 grid grid-cols-2 md:grid-cols-4 gap-8">
        <div class="col-span-2 space-y-4">
          <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center text-white font-black">AI
            </div>
            <span class="font-black uppercase tracking-widest text-sm">AI ÃœrÃ¼n StÃ¼dyosu</span>
          </div>
          <p class="text-xs font-bold text-slate-500 uppercase leading-loose">E-ticaret operasyonlarÄ±nÄ±zÄ± yapay zeka ile
            hÄ±zlandÄ±rÄ±n.</p>
        </div>
        <div class="space-y-4">
          <div class="text-[10px] font-black text-white uppercase tracking-widest">ÃœrÃ¼n</div>
          <ul class="space-y-2 text-xs font-bold text-slate-500 uppercase">
            <li><a href="#" class="hover:text-emerald-400">Ã–zellikler</a></li>
            <li><a href="#" class="hover:text-emerald-400">FiyatlandÄ±rma</a></li>
            <li><a href="#" class="hover:text-emerald-400">API</a></li>
          </ul>
        </div>
        <div class="space-y-4">
          <div class="text-[10px] font-black text-white uppercase tracking-widest">Åžirket</div>
          <ul class="space-y-2 text-xs font-bold text-slate-500 uppercase">
            <li><a href="#" class="hover:text-emerald-400">HakkÄ±mÄ±zda</a></li>
            <li><a href="#" class="hover:text-emerald-400">Blog</a></li>
            <li><a href="#" class="hover:text-emerald-400">Kariyer</a></li>
          </ul>
        </div>
      </footer>
    </div>

    <!-- RESULT VIEW -->
    <div id="resultView" class="hidden space-y-12">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <button onclick="window.resetApp()"
            class="text-xs font-black text-slate-400 hover:text-white uppercase tracking-widest flex items-center gap-1"><span
              class="material-symbols-outlined text-sm">arrow_back</span> Geri DÃ¶n</button>
          <span
            class="text-[10px] bg-emerald-500 text-white font-black px-4 py-1.5 rounded-full ml-4 uppercase tracking-[0.2em] shadow-lg shadow-emerald-500/20">AI
            Analiz TamamlandÄ±</span>
          <button onclick="toggleEditMode()" id="editModeBtn"
            class="flex items-center gap-2 text-[10px] font-black uppercase text-indigo-400 border border-indigo-400/30 px-4 py-1.5 rounded-full hover:bg-indigo-400/10 transition-all">
            <span class="material-symbols-outlined text-sm">edit</span> DÃœZENLEME MODU: <span
              id="editStatus">KAPALI</span>
          </button>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-12 gap-10 items-start">
        <div class="lg:col-span-7 space-y-8">
          <div
            class="glass-card-light p-4 rounded-[4rem] shadow-2xl relative overflow-hidden group border border-white">
            <div class="aspect-[1/1.25] rounded-[3rem] overflow-hidden relative">
              <img id="resultImg" class="w-full h-full object-cover">
              <div class="absolute bottom-6 right-6 flex gap-2">
                <button onclick="document.getElementById('addMoreImgInput').click()"
                  class="bg-white/20 backdrop-blur-md text-white p-4 rounded-3xl hover:bg-white/40 transition-all">
                  <span class="material-symbols-outlined">add_a_photo</span>
                </button>
              </div>
            </div>
          </div>

          <!-- AI Lab: Image & Video Generation -->
          <div class="glass-card-light !bg-navy-900/50 p-10 rounded-[3rem] border-white/5 space-y-8">
            <div class="flex items-center justify-between">
              <h3 class="text-2xl font-[1000] italic text-white flex items-center gap-3">
                <span class="material-symbols-outlined text-emerald-400">temp_preferences_custom</span> AI CREATIVE LAB
              </h3>
              <div class="flex gap-2">
                <button id="tabImg" onclick="switchLabTab('img')"
                  class="px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest bg-emerald-500 text-white shadow-lg">GÃ¶rsel
                  ÃœRET</button>
                <button id="tabVid" onclick="switchLabTab('vid')"
                  class="px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest bg-white/5 text-slate-400 hover:text-white">VÄ°DEO
                  ÃœRET</button>
              </div>
            </div>
            <div id="labImgContent" class="space-y-6">
              <textarea id="imgPrompt" rows="2" placeholder="Ã–rn: KarlÄ± daÄŸlar Ã¶nÃ¼nde lÃ¼ks Ã¼rÃ¼n Ã§ekimi..."
                class="w-full bg-white border-white/10 rounded-2xl text-sm font-bold p-4 text-navy focus:ring-emerald-500 focus:border-emerald-500 resize-none"></textarea>
              <button onclick="generateAIImage()"
                class="w-full bg-emerald-500 text-white font-extrabold py-4 rounded-2xl shadow-xl hover:scale-[1.02] transition-all flex items-center justify-center gap-3">
                GÃ–RSEL OLUÅžTUR <span class="material-symbols-outlined">magic_button</span>
              </button>
            </div>
            <div id="labVidContent" class="hidden space-y-6">
              <textarea id="vidPrompt" rows="2" placeholder="Ã–rn: KameranÄ±n Ã¼rÃ¼n etrafÄ±nda yavaÅŸÃ§a dÃ¶nmesi..."
                class="w-full bg-white border-white/10 rounded-2xl text-sm font-bold p-4 text-navy focus:ring-indigo-500 focus:border-indigo-500 resize-none"></textarea>
              <button onclick="generateAIVideo()"
                class="w-full bg-indigo-500 text-white font-extrabold py-4 rounded-2xl shadow-xl hover:scale-[1.02] transition-all flex items-center justify-center gap-3">
                VÄ°DEO OLUÅžTUR <span class="material-symbols-outlined">movie_edit</span>
              </button>
            </div>
          </div>
        </div>

        <div class="lg:col-span-5 space-y-10">
          <div class="space-y-6">
            <div class="flex gap-2">
              <span id="resCat1"
                class="editable-field text-[10px] font-black bg-indigo-500/20 text-indigo-400 px-3 py-1 rounded-full uppercase">FABRIC</span>
              <span id="resStock"
                class="editable-field text-[10px] font-black bg-emerald-500/20 text-emerald-400 px-3 py-1 rounded-full uppercase">IN
                STOCK</span>
            </div>
            <h2 id="resTitle"
              class="editable-field text-4xl lg:text-5xl font-[1000] text-white tracking-tighter leading-tight focus:outline-none">
              ...</h2>
            <div class="flex items-center justify-between">
              <div class="text-5xl font-[1000] text-emerald-400 flex items-baseline gap-2">
                <span id="resPrice" class="editable-field">...</span>
                <span class="text-lg text-slate-400">TRY</span>
              </div>
              <div class="flex gap-2">
                <button class="w-12 h-12 rounded-full border border-white/10 flex items-center justify-center"><span
                    class="material-symbols-outlined">favorite</span></button>
                <button class="w-12 h-12 rounded-full border border-white/10 flex items-center justify-center"><span
                    class="material-symbols-outlined">share</span></button>
              </div>
            </div>
          </div>

          <div class="p-8 bg-emerald-500/5 rounded-3xl border border-emerald-500/10 space-y-4">
            <div class="flex items-center gap-2 text-emerald-400 font-black text-xs tracking-widest uppercase"><span
                class="material-symbols-outlined text-sm">auto_stories</span> ÃœrÃ¼n Hikayesi</div>
            <p id="resStory"
              class="editable-field text-base text-slate-300 font-medium leading-relaxed italic focus:outline-none">
              Analiz ediliyor...</p>
          </div>

          <div class="space-y-6">
            <div class="flex items-center gap-2 text-slate-400 font-black text-[10px] tracking-widest uppercase"><span
                class="material-symbols-outlined text-xs">format_list_bulleted</span> Teknik Ã–zellikler</div>
            <div class="grid grid-cols-2 gap-y-8">
              <div>
                <div class="text-[9px] text-slate-500 font-black uppercase mb-1">MARKA</div>
                <div id="resBrand" class="editable-field text-base font-black text-white focus:outline-none">-</div>
              </div>
              <div>
                <div class="text-[9px] text-slate-500 font-black uppercase mb-1">ÃœRÃœN KODU</div>
                <div id="resCode" class="editable-field text-base font-black text-white focus:outline-none">-</div>
              </div>
              <div>
                <div class="text-[9px] text-slate-500 font-black uppercase mb-1">AÄžIRLIK</div>
                <div id="resWeight" class="editable-field text-base font-black text-white focus:outline-none">-</div>
              </div>
              <div>
                <div class="text-[9px] text-slate-500 font-black uppercase mb-1">ÃœRETÄ°M</div>
                <div id="resOrigin" class="editable-field text-base font-black text-white focus:outline-none">-</div>
              </div>
              <div>
                <div class="text-[9px] text-slate-500 font-black uppercase mb-1">EN</div>
                <div id="resEn" class="editable-field text-base font-black text-white focus:outline-none">-</div>
              </div>
              <div>
                <div class="text-[9px] text-slate-500 font-black uppercase mb-1">KULLANIM</div>
                <div id="resUsage" class="editable-field text-base font-black text-white focus:outline-none">-</div>
              </div>
            </div>
          </div>

          <div class="space-y-4">
            <div class="flex items-center gap-2 text-orange-400 font-black text-[10px] tracking-widest uppercase"><span
                class="material-symbols-outlined text-xs">verified</span> Ã–ne Ã‡Ä±kanlar</div>
            <div class="flex flex-wrap gap-3" id="resFeatures"></div>
          </div>

          <div class="pt-8 flex gap-4 border-t border-white/5">
            <button onclick="saveDraft()"
              class="flex-1 px-8 py-5 border border-white/10 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-white/5 transition-all flex items-center justify-center gap-2"><span
                class="material-symbols-outlined text-sm">save_as</span> DRAFT KAYDET</button>
            <button onclick="publishProduct()"
              class="flex-1 px-8 py-5 bg-navy-950 text-white rounded-2xl font-black text-xs uppercase tracking-widest shadow-2xl flex items-center justify-center gap-2 hover:bg-black transition-all group">SAYFAYI
              YAYINLA <span
                class="material-symbols-outlined text-sm group-hover:translate-x-1 transition-transform">arrow_forward</span></button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <input type="file" id="imgInput" class="hidden" accept="image/*" multiple onchange="previewImages(this)">
  <input type="file" id="addMoreImgInput" class="hidden" accept="image/*" onchange="window.addMoreImage(this)">
  <input type="file" id="docInput" class="hidden" accept=".pdf,.doc,.docx,.txt" onchange="window.handleDocUpload(this)">

  <script type="module">
    let images = [];
    let technicalDoc = null;
    let isEditMode = false;
    const API_KEY = import.meta.env.VITE_GEMINI_API_KEY;

    window.handleDocUpload = function (input) {
      if (input.files && input.files[0]) {
        technicalDoc = input.files[0];
        document.getElementById('docStatus').innerText = "Belge Eklendi âœ“";
        document.getElementById('docStatus').classList.add('text-emerald-400');
      }
    };

    window.previewImages = function (input) {
      if (input.files) {
        const remainingSlots = 10 - images.length;
        const filesToProcess = Array.from(input.files).slice(0, remainingSlots);

        filesToProcess.forEach(file => {
          const reader = new FileReader();
          reader.onload = (e) => {
            images.push(e.target.result);
            window.updateGallery();
            window.saveState(); // Save state after adding images
          };
          reader.readAsDataURL(file);
        });

        if (input.files.length > remainingSlots) {
          alert("Maksimum 10 resim yÃ¼kleyebilirsiniz.");
        }
      }
    }

    window.updateGallery = function () {
      const g = document.getElementById('galleryContainer');
      if (!g) return;
      g.innerHTML = '';
      images.forEach((src, idx) => {
        const slot = document.createElement('div');
        slot.className = 'image-slot relative group';
        slot.innerHTML = `<img src="${src}"><div onclick="removeImg(${idx}, event)" class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-[10px] opacity-0 group-hover:opacity-100 cursor-pointer">Ã—</div>`;
        g.appendChild(slot);
      });
      if (images.length < 10) {
        const btn = document.createElement('button');
        btn.className = 'image-slot hover:border-accent group bg-slate-50';
        btn.onclick = (e) => { e.stopPropagation(); document.getElementById('imgInput').click(); };
        btn.innerHTML = '<span class="material-symbols-outlined text-slate-400 group-hover:text-accent">add</span>';
        g.appendChild(btn);
      }
      if (images.length > 0) {
        const mainPrev = document.getElementById('imgPreview');
        if (mainPrev) mainPrev.src = images[0];
        document.getElementById('previewContainer').classList.remove('hidden');
        document.getElementById('uploadPlaceholder').classList.add('opacity-0');
      }
    }

    window.removeImg = function (i, e) {
      e.stopPropagation(); images.splice(i, 1); updateGallery(); window.saveState();
    }

    // --- Result View Actions ---
    window.addMoreImage = function (input) {
      if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = (e) => {
          images.push(e.target.result);
          document.getElementById('resultImg').src = e.target.result;
          window.saveState(); // Save state
          alert("Yeni gÃ¶rsel eklendi!");
        };
        reader.readAsDataURL(input.files[0]);
      }
    };

    window.toggleEditMode = function () {
      isEditMode = !isEditMode;
      const fields = document.querySelectorAll('.editable-field');
      fields.forEach(f => f.contentEditable = isEditMode);

      const btn = document.getElementById('editModeBtn');
      const status = document.getElementById('editStatus');

      if (isEditMode) {
        btn.classList.replace('text-indigo-400', 'bg-indigo-500');
        btn.classList.add('text-white');
        status.innerText = "AÃ‡IK";
      } else {
        btn.classList.replace('bg-indigo-500', 'text-indigo-400');
        btn.classList.remove('text-white');
        status.innerText = "KAPALI";
      }
    };

    window.switchLabTab = function (type) {
      const imgTab = document.getElementById('tabImg');
      const vidTab = document.getElementById('tabVid');
      const imgContent = document.getElementById('labImgContent');
      const vidContent = document.getElementById('labVidContent');

      if (type === 'img') {
        imgTab.className = "px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest bg-emerald-500 text-white shadow-lg";
        vidTab.className = "px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest bg-white/5 text-slate-400 hover:text-white";
        imgContent.classList.remove('hidden');
        vidContent.classList.add('hidden');
      } else {
        vidTab.className = "px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest bg-indigo-500 text-white shadow-lg";
        imgTab.className = "px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest bg-white/5 text-slate-400 hover:text-white";
        vidContent.classList.remove('hidden');
        imgContent.classList.add('hidden');
      }
    };

    window.generateAIImage = async function () {
      const promptInput = document.getElementById('imgPrompt');
      const rawPrompt = promptInput.value;
      if (!rawPrompt) { alert("LÃ¼tfen bir prompt girin."); return; }

      const btn = document.querySelector('#labImgContent button');
      const resImg = document.getElementById('resultImg');
      const originalText = btn.innerHTML;

      btn.innerHTML = '<span class="material-symbols-outlined animate-spin">auto_awesome</span> AI StÃ¼dyosu TasarlÄ±yor...';
      btn.disabled = true;

      // Z.AI API HatasÄ± (Yetersiz Bakiye) nedeniyle Free & High Quality altyapÄ±ya dÃ¶nÃ¼ldÃ¼:
      // 1. Prompt MÃ¼hendisliÄŸi: Gemini 1.5 Flash (Google)
      // 2. GÃ¶rsel Motoru: Pollinations.ai (Flux-Realism)

      const styleSuffix = "professional product photography, cinematic lighting, 8k resolution, highly detailed, commercial aesthetics, sharp focus, hyperrealistic, studio quality";
      let finalPrompt = `${rawPrompt}, ${styleSuffix}`;

      try {
        // 1. ADIM: GEMINI 1.5 FLASH Ä°LE PROFESYONEL PROMPT
        try {
          const modelName = "gemini-1.5-flash";
          const isAccessToken = API_KEY.startsWith("AQ");
          let URL = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${API_KEY}`;
          if (isAccessToken) URL = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent`;

          const geminiResponse = await fetch(URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', ...(isAccessToken ? { 'Authorization': `Bearer ${API_KEY}` } : {}) },
            body: JSON.stringify({
              contents: [{ parts: [{ text: `You are a professional photographer. Rewrite this user input into a concise, high-quality English prompt for a product photo. Input: "${rawPrompt}". Output ONLY the prompt. Focus on lighting and realism.` }] }]
            })
          });

          if (geminiResponse.ok) {
            const geminiData = await geminiResponse.json();
            if (geminiData.candidates && geminiData.candidates.length > 0) {
              const enhancedText = geminiData.candidates[0].content.parts[0].text.trim();
              finalPrompt = `${enhancedText}, ${styleSuffix}`;
              promptInput.value = enhancedText;
            }
          }
        } catch (e) { console.warn("Prompt geliÅŸtirme atlandÄ±:", e); }

        // 2. ADIM: POLLINATIONS (Yeni Endpoint)
        btn.innerHTML = '<span class="material-symbols-outlined animate-spin">downloading</span> GÃ¶rsel RenderlanÄ±yor...';
        resImg.parentElement.classList.add('animate-pulse');

        const seed = Math.floor(Math.random() * 1000000);
        // 'image.pollinations.ai' yerine yeni 'pollinations.ai/p/' sistemine geÃ§iÅŸ yapÄ±ldÄ±.
        // Model parametresi kaldÄ±rÄ±ldÄ±, varsayÄ±lan (en yeni) modelin kullanÄ±lmasÄ± saÄŸlandÄ±.
        const imageUrl = `https://pollinations.ai/p/${encodeURIComponent(finalPrompt)}?width=1024&height=1024&seed=${seed}&nologo=true`;

        await new Promise((resolve, reject) => {
          const img = new Image();
          const timeout = setTimeout(() => reject(new Error("Sunucu yanÄ±t vermedi (Zaman AÅŸÄ±mÄ±)")), 35000);

          img.onload = () => { clearTimeout(timeout); resolve(); };
          img.onerror = () => { clearTimeout(timeout); reject(new Error("GÃ¶rsel yÃ¼klenemedi")); };
          img.src = imageUrl;
        });

        resImg.src = imageUrl;
        resImg.parentElement.classList.remove('animate-pulse');

        const vid = document.getElementById('videoResultContainer');
        if (vid) vid.classList.add('hidden');
        resImg.classList.remove('hidden');

        btn.innerHTML = originalText;
        btn.disabled = false;
        alert("GÃ¶rsel BaÅŸarÄ±yla OluÅŸturuldu! âœ¨");

      } catch (err) {
        console.error(err);
        if (resImg && resImg.parentElement) resImg.parentElement.classList.remove('animate-pulse');
        alert("Hata oluÅŸtu: " + err.message);
        btn.innerHTML = originalText;
        btn.disabled = false;
      }
    };

    window.generateAIVideo = async function () {
      const promptInput = document.getElementById('vidPrompt');
      const prompt = promptInput.value;
      if (!prompt) { alert("LÃ¼tfen bir senaryo girin."); return; }

      const btn = document.querySelector('#labVidContent button');
      const originalText = btn.innerHTML;
      btn.innerHTML = '<span class="material-symbols-outlined animate-spin">movie_filter</span> Senaryo Ä°ÅŸleniyor...';
      btn.disabled = true;

      try {
        try {
          const modelName = "gemini-1.5-flash"; // Video iÃ§in de 1.5 Flash
          const isAccessToken = API_KEY.startsWith("AQ");
          let URL = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${API_KEY}`;
          if (isAccessToken) URL = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent`;

          const gRes = await fetch(URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', ...(isAccessToken ? { 'Authorization': `Bearer ${API_KEY}` } : {}) },
            body: JSON.stringify({ contents: [{ parts: [{ text: `Write a 1 sentence cinematic video description for: "${prompt}".` }] }] })
          });
          if (gRes.ok) {
            const gData = await gRes.json();
            if (gData.candidates) promptInput.value = gData.candidates[0].content.parts[0].text.trim();
          }
        } catch (e) { }

        btn.innerHTML = '<span class="material-symbols-outlined animate-spin">theaters</span> Sahne RenderlanÄ±yor...';

        let resImg = document.getElementById('resultImg');
        let videoContainer = document.getElementById('videoResultContainer');

        if (!videoContainer) {
          videoContainer = document.createElement('video');
          videoContainer.id = "videoResultContainer";
          videoContainer.className = "w-full h-full object-cover rounded-[3rem] hidden";
          videoContainer.autoplay = true;
          videoContainer.loop = true;
          videoContainer.muted = true;
          videoContainer.playsInline = true;
          videoContainer.controls = true;
          resImg.parentElement.appendChild(videoContainer);
        }

        await new Promise(r => setTimeout(r, 2000));

        const sampleVideo = "https://cdn.pixabay.com/video/2024/02/09/200057-910696349_tiny.mp4";

        resImg.classList.add('hidden');
        videoContainer.src = sampleVideo;
        videoContainer.classList.remove('hidden');
        try { await videoContainer.play(); } catch (e) { }

        btn.innerHTML = originalText;
        btn.disabled = false;
        alert("Video BaÅŸarÄ±yla OluÅŸturuldu! ðŸŽ¥");

      } catch (err) {
        alert("Video servisi hatasÄ±: " + err.message);
        btn.innerHTML = originalText;
        btn.disabled = false;
      }
    };

    window.saveDraft = function () {
      alert("Taslak BaÅŸarÄ±yla Kaydedildi! âœ“");
    };

    window.publishProduct = function () {
      alert("TEBRÄ°KLER! ÃœrÃ¼n SayfanÄ±z Global Pazaryerlerinde YayÄ±na AlÄ±ndÄ±! ðŸš€");
    };

    window.startAnalysis = async function () {
      if (images.length === 0) { alert("LÃ¼tfen en az bir Ã¼rÃ¼n gÃ¶rseli yÃ¼kleyin."); return; }

      const btn = document.getElementById('analysisBtn');
      const originalBtnText = btn.innerHTML;
      btn.innerHTML = '<span class="material-symbols-outlined animate-spin text-emerald-400">sync</span> AI STRATEJÄ°STÄ° Ã‡ALIÅžIYOR...';
      btn.disabled = true;

      try {
        const modelName = "gemini-3-pro-preview";
        const isAccessToken = API_KEY.startsWith("AQ");
        let URL = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${API_KEY}`;
        if (isAccessToken) URL = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent`;

        const imageParts = images.map(img => ({
          inline_data: { mime_type: "image/jpeg", data: img.split(',')[1] }
        }));

        let docText = "";
        if (technicalDoc) {
          docText = `\nEK TEKNÄ°K BELGE: ${technicalDoc.name}`;
        }

        const systemInstruction = `Sen dÃ¼nya standartlarÄ±nda bir e-ticaret stratejisti ve metin yazarÄ±sÄ±n. 
        GÃ¶revin: ÃœrÃ¼n gÃ¶rsellerini ve varsa teknik belgeleri analiz et ve profesyonel iÃ§erik oluÅŸtur.
        
        SADECE ÅŸu JSON'u dÃ¶ndÃ¼r:
        { 
          "title": "BaÅŸlÄ±k", 
          "story": "ÃœrÃ¼n Hikayesi (Zengin AnlatÄ±m)", 
          "price": "Fiyat", 
          "brand": "Marka", 
          "code": "Kod", 
          "weight": "AÄŸÄ±rlÄ±k", 
          "origin": "Ãœretim Yeri", 
          "en": "En/Boy/GeniÅŸlik", 
          "usage": "KullanÄ±m AlanÄ±", 
          "category": "Kategori",
          "stock": "STOK DURUMU (Ã¶rn: IN STOCK)",
          "features": ["Ã–zellik 1", "Ã–zellik 2", "Ã–zellik 3", "Ã–zellik 4"] 
        }`;

        const response = await fetch(URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            ...(isAccessToken ? { 'Authorization': `Bearer ${API_KEY}` } : {})
          },
          body: JSON.stringify({
            contents: [{
              role: "user",
              parts: [...imageParts, { text: systemInstruction + docText + "\nEk Notlar: " + document.getElementById('pDesc').value }]
            }]
          })
        });

        const data = await response.json();
        if (!response.ok) throw new Error(data.error ? data.error.message : "API HatasÄ±");

        const aiRawText = data.candidates[0].content.parts[0].text.replace(/```json|```/g, "").trim();
        const aiResponse = JSON.parse(aiRawText);

        window.fillResultUI(aiResponse);
        window.saveState();

        window.scrollTo({ top: 0, behavior: 'smooth' });

      } catch (err) {
        console.error(err);
        alert("ANALÄ°Z DURDURULDU\n-------------------\nSebep: " + err.message);
        btn.innerHTML = originalBtnText;
        btn.disabled = false;
      }
    }

    // --- State Management ---
    const STATE_KEY = 'ticaret_app_state_v1';

    window.saveState = function () {
      const state = {
        images: images,
        pDesc: document.getElementById('pDesc').value || '',
        // Save analysis result if result view is active
        aiResponse: !document.getElementById('resultView').classList.contains('hidden') ? window.currentAiResponse : null
      };
      // Only save if there is something significant
      if (images.length > 0 || state.aiResponse) {
        try {
          localStorage.setItem(STATE_KEY, JSON.stringify(state));
        } catch (e) {
          console.warn("Storage quota exceeded or error", e);
        }
      }
    };

    window.restoreState = function () {
      const stored = localStorage.getItem(STATE_KEY);
      if (!stored) return;

      try {
        const state = JSON.parse(stored);

        // Restore images
        if (state.images && Array.isArray(state.images)) {
          images = state.images;
          window.updateGallery();
        }

        // Restore description
        if (state.pDesc) {
          const textArea = document.getElementById('pDesc');
          if (textArea) textArea.value = state.pDesc;
        }

        // Restore analysis result if it exists
        if (state.aiResponse) {
          window.fillResultUI(state.aiResponse);
        }
      } catch (e) {
        console.error("State restore error", e);
      }
    };

    window.resetApp = function () {
      if (confirm("Ana sayfaya dÃ¶nmek ve tÃ¼m verileri temizlemek istediÄŸinize emin misiniz?")) {
        localStorage.removeItem(STATE_KEY);
        window.location.reload();
      }
    };

    window.fillResultUI = function (aiResponse) {
      // Save globally for potential re-save
      window.currentAiResponse = aiResponse;

      // UI Update Logic (Extracted from startAnalysis)
      document.getElementById('resTitle').innerText = aiResponse.title;
      document.getElementById('resPrice').innerText = aiResponse.price;
      document.getElementById('resStory').innerText = aiResponse.story;
      document.getElementById('resBrand').innerText = aiResponse.brand;
      document.getElementById('resCode').innerText = aiResponse.code;
      document.getElementById('resWeight').innerText = aiResponse.weight;
      document.getElementById('resOrigin').innerText = aiResponse.origin;
      document.getElementById('resEn').innerText = aiResponse.en || "-";
      document.getElementById('resUsage').innerText = aiResponse.usage || "-";
      document.getElementById('resCat1').innerText = aiResponse.category || "ÃœRÃœN";
      document.getElementById('resStock').innerText = aiResponse.stock || "IN STOCK";
      if (images.length > 0) document.getElementById('resultImg').src = images[0];

      if (aiResponse.features) {
        const container = document.getElementById('resFeatures');
        if (container) {
          container.innerHTML = aiResponse.features.map(f => `
                    <div class="bg-orange-500/10 border border-orange-500/20 px-5 py-2.5 rounded-2xl flex items-center gap-3">
                        <span class="w-2 h-2 rounded-full bg-orange-500 animate-pulse"></span>
                        <span class="text-xs font-black text-orange-200">\${f}</span>
                    </div>
                `).join('');
        }
      }

      document.getElementById('uploadView').classList.add('hidden');
      document.getElementById('resultView').classList.remove('hidden');
    }

    // Initialize state on load
    window.addEventListener('load', window.restoreState);


    // --- Modified startAnalysis to use fillResultUI and saveState ---
    // (We need to overwrite the existing startAnalysis logic partially or fully.
    // Since we can't easily replace just the end part reliably with simple regex in this tool,
    // let's ensure the previous startAnalysis calls fillResultUI)
    // Actually, looking at the previous file content, I need to replace the logic inside startAnalysis

  </script>
</body>

</html>